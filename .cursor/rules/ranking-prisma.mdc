---
description: 
globs: 
alwaysApply: true
---
# ğŸ§  UFC Ranking System â€“ Project Rules

## ğŸ”§ Projeto

- **Nome:** UFC Ranking System  
- **Stack:** NestJS + Prisma + PostgreSQL (backend) | Next.js (App Router) + Tailwind + ShadCN (frontend)  
- **Objetivo:** Sistema completo para rankear lutadores do UFC com base em eventos, lutas e regras de pontuaÃ§Ã£o.

## ğŸ§  LÃ³gica de PontuaÃ§Ã£o (resumida)

- VitÃ³ria: +3  
- VitÃ³ria por Nocaute/FinalizaÃ§Ã£o no 1Âº ao 5Âº round: +5 a +1  
- VitÃ³ria por DecisÃ£o: UnÃ¢nime +2 / Dividida +1  
- VitÃ³ria por DesclassificaÃ§Ã£o ou Empate: +1  
- VitÃ³ria em luta de tÃ­tulo: +3  
- Derrota por nocaute/finalizaÃ§Ã£o: -5  
- Derrota por decisÃ£o unÃ¢nime/dividida: -3 / -2  
- Derrota por desclassificaÃ§Ã£o: -2  
- Derrota em luta de tÃ­tulo: -2  
- No Contest: contabiliza a luta mas nÃ£o soma ponto  
- BÃ´nus: Performance da Noite ou Luta da Noite: +1 cada  
- SequÃªncia de VitÃ³rias/Derrotas: de +1 a +4 ou -1 a -4 (dependendo da quantidade)  
- CritÃ©rios de desempate: menos derrotas > vitÃ³rias por tÃ­tulo > 1Âº round > 2Âº round > 3Âº round > bÃ´nus

## ğŸ† Rankings

- **Ranking Peso por Peso** (todos os lutadores juntos, independente da categoria/sexo)  
- Rankings por categoria (masculino e feminino)  
- Lutas em **Peso Casado** contam apenas para o ranking peso por peso  
- Exibem apenas **15 primeiros** por categoria  
- Todos os lutadores aparecem com sua posiÃ§Ã£o no ranking da **categoria atual** e **peso por peso**

## ğŸ¨ Cores de Destaque

- ğŸŸ¤ Dourado Escuro: 1Âº lugar em qualquer ranking com no mÃ­nimo 10 lutas (fundo fixo para sempre)  
- ğŸŸ¡ Dourado Claro: 2Âº ao 5Âº no peso por peso  
- ğŸ”µ Azul Escuro: 6Âº ao 15Âº no peso por peso + 2Âº ao 5Âº nas demais categorias  
- ğŸ”µ Azul Claro: 6Âº ao 15Âº nas demais categorias  

## ğŸ“Š Recordes

- Recordes monitorados:
  - Mais lutas
  - Mais vitÃ³rias
  - Mais derrotas
  - Mais nocautes
  - Mais finalizaÃ§Ãµes
  - Mais vitÃ³rias por decisÃ£o
  - Mais bÃ´nus da noite
- Mostrados em `/recordes`
- Quando um recorde for quebrado, aparece ao final da finalizaÃ§Ã£o de evento

## âš™ï¸ Backend (NestJS)

- CRUD de lutadores, eventos e lutas  
- Finalizar evento atualiza o ranking e verifica recordes  
- EdiÃ§Ã£o de lutas reverte a pontuaÃ§Ã£o e recalcula ranking  
- Endpoint para obter estatÃ­sticas individuais do lutador  
- Seed massivo com dezenas de lutadores, eventos e lutas  

## ğŸ’» Frontend (Next.js App Router)

- PÃ¡gina principal redireciona para `/ranking/peso-por-peso`  
- PÃ¡ginas:
  - `/ranking/[categoria]`: mostra ranking por categoria
  - `/recordes`: mostra os recordes atuais
  - `/lutadores`: lista todos os lutadores cadastrados
- Navbar fixa  
- Estilo com Tailwind + ShadCN  
- Layout com fonte Geist  
- IntegraÃ§Ã£o direta com a API do backend (localhost:3001)

## ğŸ” Melhorias em Progresso

- Modal com estatÃ­sticas do lutador (ao clicar no nome no ranking)  
- Filtro de busca de lutadores (por nome, paÃ­s, sexo)  
- VariaÃ§Ã£o de ranking (â¬†ï¸â¬‡ï¸ comparando posiÃ§Ãµes anteriores)  
- Design responsivo  
- AnimaÃ§Ãµes com Framer Motion (opcional)

## âš ï¸ ObservaÃ§Ãµes

- O sistema roda o backend em **localhost:3001** e o frontend em **localhost:3000** (ou 3001, se o 3000 estiver em uso)  
- Todas as mudanÃ§as em lutas ou eventos devem **forÃ§ar atualizaÃ§Ã£o do ranking**